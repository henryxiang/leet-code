{
  "questionId": "903",
  "questionFrontendId": "470",
  "boundTopicId": null,
  "title": "Implement Rand10() Using Rand7()",
  "titleSlug": "implement-rand10-using-rand7",
  "categoryTitle": "Algorithms",
  "content": "<p>Given a function <code>rand7</code> which generates a uniform random integer in the range 1 to 7, write a function <code>rand10</code>&nbsp;which generates a uniform random integer in the range 1 to 10.</p>\r\n\r\n<p>Do NOT use system&#39;s <code>Math.random()</code>.</p>\r\n\r\n<ol>\r\n</ol>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<div>\r\n<p><strong>Example 1:</strong></p>\r\n\r\n<pre>\r\n<strong>Input: </strong><span id=\"example-input-1-1\">1</span>\r\n<strong>Output: </strong><span id=\"example-output-1\">[7]</span>\r\n</pre>\r\n\r\n<div>\r\n<p><strong>Example 2:</strong></p>\r\n\r\n<pre>\r\n<strong>Input: </strong><span id=\"example-input-2-1\">2</span>\r\n<strong>Output: </strong><span id=\"example-output-2\">[8,4]</span>\r\n</pre>\r\n\r\n<div>\r\n<p><strong>Example 3:</strong></p>\r\n\r\n<pre>\r\n<strong>Input: </strong><span id=\"example-input-3-1\">3</span>\r\n<strong>Output: </strong><span id=\"example-output-3\">[8,1,10]</span>\r\n</pre>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><strong>Note:</strong></p>\r\n\r\n<ol>\r\n\t<li><code>rand7</code> is predefined.</li>\r\n\t<li>Each testcase has one argument:&nbsp;<code>n</code>, the number of times that <code>rand10</code> is called.</li>\r\n</ol>\r\n\r\n<p>&nbsp;</p>\r\n\r\n<p><strong>Follow up:</strong></p>\r\n\r\n<ol>\r\n\t<li>What is the <a href=\"https://en.wikipedia.org/wiki/Expected_value\" target=\"_blank\">expected value</a>&nbsp;for the number of calls to&nbsp;<code>rand7()</code>&nbsp;function?</li>\r\n\t<li>Could you minimize the number of calls to <code>rand7()</code>?</li>\r\n</ol>\r\n</div>\r\n</div>\r\n</div>\r\n",
  "isPaidOnly": false,
  "difficulty": "Medium",
  "likes": 300,
  "dislikes": 95,
  "isLiked": null,
  "similarQuestions": "[]",
  "contributors": [
    {
      "username": "1337c0d3r",
      "profileUrl": "/1337c0d3r/",
      "avatarUrl": "https://assets.leetcode.com/users/1337c0d3r/avatar_1547177258.png"
    }
  ],
  "topicTags": [
    {
      "name": "Random",
      "slug": "random"
    },
    {
      "name": "Rejection Sampling",
      "slug": "rejection-sampling"
    }
  ],
  "companyTagStats": "{\"3\": [{\"taggedByAdmin\": false, \"name\": \"Google\", \"slug\": \"google\", \"timesEncountered\": 2}, {\"taggedByAdmin\": false, \"name\": \"ByteDance\", \"slug\": \"bytedance\", \"timesEncountered\": 2}], \"1\": [{\"taggedByAdmin\": false, \"name\": \"Microsoft\", \"slug\": \"microsoft\", \"timesEncountered\": 5}], \"2\": []}",
  "codeSnippets": [
    {
      "lang": "C++",
      "code": "// The rand7() API is already defined for you.\r\n// int rand7();\r\n// @return a random integer in the range 1 to 7\r\n\r\nclass Solution {\r\npublic:\r\n    int rand10() {\r\n        \r\n    }\r\n};"
    },
    {
      "lang": "Java",
      "code": "/**\r\n * The rand7() API is already defined in the parent class SolBase.\r\n * public int rand7();\r\n * @return a random integer in the range 1 to 7\r\n */\r\nclass Solution extends SolBase {\r\n    public int rand10() {\r\n        \r\n    }\r\n}"
    },
    {
      "lang": "Python",
      "code": "# The rand7() API is already defined for you.\r\n# def rand7():\r\n# @return a random integer in the range 1 to 7\r\n\r\nclass Solution(object):\r\n    def rand10(self):\r\n        \"\"\"\r\n        :rtype: int\r\n        \"\"\"\r\n        "
    },
    {
      "lang": "Python3",
      "code": "# The rand7() API is already defined for you.\r\n# def rand7():\r\n# @return a random integer in the range 1 to 7\r\n\r\nclass Solution:\r\n    def rand10(self):\r\n        \"\"\"\r\n        :rtype: int\r\n        \"\"\"\r\n        "
    },
    {
      "lang": "C",
      "code": "// The rand7() API is already defined for you.\r\n// int rand7();\r\n// @return a random integer in the range 1 to 7\r\n\r\nint rand10() {\r\n    \r\n}"
    },
    {
      "lang": "C#",
      "code": "/**\r\n * The Rand7() API is already defined in the parent class SolBase.\r\n * public int Rand7();\r\n * @return a random integer in the range 1 to 7\r\n */\r\npublic class Solution : SolBase {\r\n    public int Rand10() {\r\n        \r\n    }\r\n}"
    },
    {
      "lang": "JavaScript",
      "code": "/**\r\n * The rand7() API is already defined for you.\r\n * var rand7 = function() {}\r\n * @return {number} a random integer in the range 1 to 7\r\n */\r\nvar rand10 = function() {\r\n    \r\n};"
    },
    {
      "lang": "Ruby",
      "code": "# The rand7() API is already defined for you.\r\n# def rand7()\r\n# @return {Integer} a random integer in the range 1 to 7\r\n\r\ndef rand10()\r\n    \r\nend"
    },
    {
      "lang": "Swift",
      "code": "/**\r\n * The rand7() API is already defined in the parent class SolBase.\r\n * func rand7() -> Int = {}\r\n * @return a random integer in the range 1 to 7\r\n */\r\nclass Solution : SolBase {\r\n    func rand10() -> Int {\r\n        \r\n    }\r\n}"
    },
    {
      "lang": "Go",
      "code": "func rand10() int {\r\n    \r\n}"
    },
    {
      "lang": "Scala",
      "code": "/**\r\n * The rand7() API is already defined in the parent class SolBase.\r\n * def rand7(): Int = {}\r\n * @return a random integer in the range 1 to 7\r\n */\r\nobject Solution extends SolBase {\r\n    def rand10(): Int = {\r\n        \r\n    }\r\n}"
    },
    {
      "lang": "Kotlin",
      "code": "/**\r\n * The rand7() API is already defined in the parent class SolBase.\r\n * fun rand7(): Int {}\r\n * @return a random integer in the range 1 to 7\r\n */\r\nclass Solution : SolBase() {\r\n    fun rand10(): Int {\r\n        \r\n    }\r\n}"
    }
  ],
  "stats": "{\"totalAccepted\": \"15.7K\", \"totalSubmission\": \"34.3K\", \"totalAcceptedRaw\": 15657, \"totalSubmissionRaw\": 34323, \"acRate\": \"45.6%\"}",
  "hints": [],
  "solution": {
    "id": "510",
    "canSeeDetail": true,
    "url": "/articles/implement-rand10-using-rand7/",
    "content": "[TOC]\n\n## Solution\n\n---\n\n#### Approach 1: Rejection Sampling\n\n**Intuition**\n\nWhat if you could generate a random integer in the range 1 to 49? How would you generate a random integer in the range of 1 to 10? What would you do if the generated number is in the desired range? What if it is not?\n\n**Algorithm**\n\nThis solution is based upon [Rejection Sampling](https://en.wikipedia.org/wiki/Rejection_sampling). The main idea is when you generate a number in the desired range, output that number immediately. If the number is out of the desired range, reject it and re-sample again. As each number in the desired range has the same probability of being chosen, a uniform distribution is produced.\n\nObviously, we have to run rand7() function at least twice, as there are not enough numbers in the range of 1 to 10. By running rand7() twice, we can get integers from 1 to 49 uniformly. Why?\n\n<br/>\n\n<p align=\"center\">\n<img src=\"../Figures/470/rejectionSamplingTable.png\" alt=\"rejectionSamplingTable\" style=\"height: 300px;\"/>\n\n<br/>\n\nA table is used to illustrate the concept of rejection sampling. Calling rand7() twice will get us row and column index that corresponds to a unique position in the table above. Imagine that you are choosing a number randomly from the table above. If you hit a number, you return that number immediately. If you hit a * , you repeat the process again until you hit a number.\n</p>\n\nSince 49 is not a multiple of 10, we have to use rejection sampling. Our desired range is integers from 1 to 40, which we can return the answer immediately. If not (the integer falls between 41 to 49), we reject it and repeat the whole process again.\n\n<iframe src=\"https://leetcode.com/playground/JbmdbBCo/shared\" frameBorder=\"0\" width=\"100%\" height=\"259\" name=\"JbmdbBCo\"></iframe>\n\n**Complexity Analysis**\n\n* Time Complexity: $$O(1)$$ average, but  $$O(\\infty)$$ worst case.\n\nThe [expected value](https://en.wikipedia.org/wiki/Expected_value) for the number of calls to rand7() can be computed as follows:\n\n$$\n\\begin{align}\nE\\left( \\text{# calls to rand7} \\right) =\n\\ & 2 \\cdot \\frac{40}{49} + \\\\\n& 4 \\cdot \\frac{9}{49} \\cdot \\frac{40}{49} + \\\\\n& 6 \\cdot \\left(\\frac{9}{49}\\right)^2 \\cdot \\frac{40}{49} + \\\\\n\\ \\\\\n& ...\\\\\n\\ \\\\\n=\\ & \\sum_{k=1}^{\\infty} \\left(\\frac{9}{49}\\right)^{k-1} \\cdot \\frac{40}{49} \\\\\n=\\ & \\frac{80}{49 \\cdot \\left(1 - \\dfrac{9}{49}\\right)^2} \\\\\n\\ \\\\\n=\\ & 2.45\n\\end{align}\n$$\n\n* Space Complexity: $$O(1)$$.\n\n<br/>\n\n---\n\n#### Approach 2: Utilizing out-of-range samples\n\n**Intuition**\n\nThere are a total of 2.45 calls to rand7() on average when using approach 1. Can we do better? Glad that you asked. In fact, we are able to improve average number of calls to rand7() by about 10%.\n\nThe idea is that we should not throw away the out-of-range samples, but instead use them to increase our chances of finding an in-range sample on the successive call to rand7.\n\n**Algorithm**\n\nStart by generating a random integer in the range 1 to 49 using the aforementioned method. In the event that we could not generate a number in the desired range (1 to 40), it is equally likely that each number of 41 to 49 would be chosen. In other words, we are able to obtain integers in the range of 1 to 9 uniformly. Now, run rand7() again to obtain integers in the range of 1 to 63 uniformly. Apply rejection sampling where the desired range is 1 to 60. If the generated number is in the desired range (1 to 60), we return the number. If it is not (61 to 63), we at least obtain integers of 1 to 3 uniformly. Run rand7() again to obtain integers in the range of 1 to 21 uniformly. The desired range is 1 to 20, and in the unlikely event we get a 21, we reject it and repeat the entire process again.\n\n<iframe src=\"https://leetcode.com/playground/frCUaJYp/shared\" frameBorder=\"0\" width=\"100%\" height=\"480\" name=\"frCUaJYp\"></iframe>\n\n**Complexity Analysis**\n\n* Time Complexity: $$O(1)$$ average, but  $$O(\\infty)$$ worst case.\n\nThe [expected value](https://en.wikipedia.org/wiki/Expected_value) for the number of calls to rand7() can be computed as follows (with some steps omitted due to tediousness):\n\n$$\n\\begin{align}\nE\\left( \\text{# calls to rand7} \\right) =\\,& 2 \\cdot \\frac{40}{49} + \\\\\n&3 \\cdot \\frac{9}{49} \\cdot \\frac{60}{63} + \\\\\n&4 \\cdot \\frac{9}{49} \\cdot \\frac{3}{63} \\cdot \\frac{20}{21} + \\\\\n\\\\\n&\\left(\\frac{9}{49} \\cdot \\frac{3}{63} \\cdot \\frac{1}{21}\\right) \\times \\\\\n& \\left( 6 \\cdot \\frac{40}{49} + \\right. \\\\\n& \\ \\ \\  7 \\cdot \\frac{9}{49} \\cdot \\frac{60}{63} + \\\\\n& \\left. \\ \\ \\ 8  \\cdot \\frac{9}{49} \\cdot \\frac{3}{63} \\cdot \\frac{20}{21} \\right) + \\\\\n\\\\\n&\\left(\\frac{9}{49} \\cdot \\frac{3}{63} \\cdot \\frac{1}{21}\\right)^2 \\times \\\\\n&\\left( 10 \\cdot \\frac{40}{49} + \\right. \\\\\n& \\ \\ \\  11 \\cdot \\frac{9}{49} \\cdot \\frac{60}{63} + \\\\\n& \\left. \\ \\ \\ 12 \\cdot \\frac{9}{49} \\cdot \\frac{3}{63} \\cdot \\frac{20}{21} \\right) + \\\\\n\\\\\n&\\ldots \\\\\n\\\\\n=\\,& 2.2123\n\\end{align}\n$$\n\n* Space Complexity: $$O(1)$$.",
    "contentTypeId": "107",
    "rating": {
      "id": "503",
      "count": 12,
      "average": 4.583,
      "userRating": null
    }
  },
  "status": null,
  "sampleTestCase": "1",
  "metaData": "{\n  \"name\": \"rand10\",\n  \"params\": [\n    {\n      \"name\": \"n\",\n      \"type\": \"integer\"\n    }\n  ],\n  \"languages\": [\n    \"cpp\",\n    \"java\",\n    \"python\",\n    \"c\",\n    \"csharp\",\n    \"javascript\",\n    \"ruby\",\n    \"swift\",\n    \"golang\",\n    \"python3\",\n    \"scala\",\n    \"kotlin\"\n  ],\n  \"manual\": true\n}",
  "judgerAvailable": true,
  "judgeType": "large",
  "mysqlSchemas": [],
  "enableRunCode": true,
  "enableTestMode": false,
  "libraryUrl": null
}
